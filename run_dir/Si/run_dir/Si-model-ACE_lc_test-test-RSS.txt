Model ACE_lc_test, Test RSS
Test run at 2020-08-07 22:29

model file: ../../models/ACE_lc_test/model.py
============================================================
import pyjulip
import os
import glob

model_dir = os.path.dirname(os.path.realpath(__file__))
pot_name = glob.glob(os.path.join(model_dir,"*.json"))[0]

calculator = pyjulip.ACE(pot_name)

no_checkpoint = True

name = "ACE"
============================================================
test file: /Users/Cas/gits/testing-framework/scripts/../tests/Si/RSS/test.py
============================================================
import os.path
from RSS import do_RSS

properties = do_RSS(os.path.join(os.path.abspath(os.path.dirname(__file__)),'random_structs.extxyz'),':10:2')
============================================================
got index  :10:2 range_slice_args [None, 10, 2]
using i_config range(0, 5, 2)
relax_config symmetry before refinement at default tol 1.0e-6
ase.spacegroup.symmetrize: prec 1e-06 got symmetry group number 14 , international (Hermann-Mauguin) P2_1/c , Hall  -P 2ybc
relax_config trying to maintain symmetry
 SD2: i 0 E -2276.1060545900555 f 7.906354026768097 s 38.72134699342306  alpha 0.0001 False
 SD2: i 1 E -2276.379479407302 f 7.067201932206517 s 29.687071692563876  alpha 0.0004224530224006898 False
 SD2: i 2 E -2277.028371900082 f 5.061663925717185 s 25.977976342784277  alpha 0.0005423938533495795 False
 SD2: i 3 E -2277.5108958076075 f 4.697121625836295 s 29.76620704741746  alpha 0.01 False
 SD2: i 4 E -2304.056303428407 f 12.414702070677585 s 204.10344696724516  alpha 0.01 False
/Users/Cas/miniconda3/lib/python3.8/site-packages/scipy/sparse/linalg/matfuncs.py:716: LinAlgWarning: Ill-conditioned matrix (rcond=5.67931e-29): result may not be accurate.
  return solve(Q, P)
 SD2: i 5 E 846635248328380.2 f 878142429053357.4 s 4424296418585410.5  alpha 3.985981774846847e-16 False
/Users/Cas/miniconda3/lib/python3.8/site-packages/scipy/sparse/linalg/matfuncs.py:716: LinAlgWarning: Ill-conditioned matrix (rcond=1.11513e-20): result may not be accurate.
  return solve(Q, P)
 SD2: i 6 E 4245465772.875696 f 13005967020.260023 s 58407563404.48612  alpha 3.9860008562611746e-16 False
/Users/Cas/miniconda3/lib/python3.8/site-packages/scipy/sparse/linalg/matfuncs.py:716: LinAlgWarning: Ill-conditioned matrix (rcond=1.11616e-20): result may not be accurate.
  return solve(Q, P)
 SD2: i 7 E 4243477660.4134283 f 13000028548.166943 s 58381783215.56984  alpha 8.938973563523697e-13 False
/Users/Cas/miniconda3/lib/python3.8/site-packages/scipy/sparse/linalg/matfuncs.py:716: LinAlgWarning: Ill-conditioned matrix (rcond=9.46873e-20): result may not be accurate.
  return solve(Q, P)
 SD2: i 8 E 1445585601.531453 f 4547884842.329807 s 21115609694.382107  alpha 1.3927218290315884e-12 False
/Users/Cas/miniconda3/lib/python3.8/site-packages/scipy/sparse/linalg/matfuncs.py:716: LinAlgWarning: Ill-conditioned matrix (rcond=3.27696e-19): result may not be accurate.
  return solve(Q, P)
 SD2: i 9 E 773451786.4931219 f 2469681774.1867533 s 11688366909.901546  alpha 3.0981138349651985e-12 False
/Users/Cas/miniconda3/lib/python3.8/site-packages/scipy/sparse/linalg/matfuncs.py:716: LinAlgWarning: Ill-conditioned matrix (rcond=1.57926e-18): result may not be accurate.
  return solve(Q, P)
 SD2: i 10 E 351026098.76384515 f 1140399907.5110958 s 5520135606.633672  alpha 5.837016769461301e-12 False
/Users/Cas/miniconda3/lib/python3.8/site-packages/scipy/sparse/linalg/matfuncs.py:716: LinAlgWarning: Ill-conditioned matrix (rcond=6.61166e-18): result may not be accurate.
  return solve(Q, P)
 SD2: i 11 E 170557685.6491738 f 562242027.2197168 s 2785989196.567333  alpha 1.1707728880692648e-11 False
/Users/Cas/miniconda3/lib/python3.8/site-packages/scipy/sparse/linalg/matfuncs.py:716: LinAlgWarning: Ill-conditioned matrix (rcond=7.3187e-18): result may not be accurate.
  return solve(Q, P)
 SD2: i 12 E 80520138.96293852 f 269559929.6896602 s 1370438719.6740038  alpha 2.2884929617291805e-11 False
/Users/Cas/miniconda3/lib/python3.8/site-packages/scipy/sparse/linalg/matfuncs.py:716: LinAlgWarning: Ill-conditioned matrix (rcond=3.16287e-17): result may not be accurate.
  return solve(Q, P)
 SD2: i 13 E 38355342.26065563 f 130534254.71499468 s 680123720.5472758  alpha 4.509525393074236e-11 False
 SD2: i 14 E 18216273.409815025 f 63111090.83029498 s 336189257.5164628  alpha 8.857301376935923e-11 False
 SD2: i 15 E 8673536.040684313 f 30624680.47429091 s 166154343.10452712  alpha 1.740824942788107e-10 False
 SD2: i 16 E 4149852.02525724 f 14909283.289237747 s 82002362.82854575  alpha 3.415423554210249e-10 False
 SD2: i 17 E 2008275.8580292044 f 7301912.085903829 s 40677914.72749163  alpha 6.736355116212074e-10 False
 SD2: i 18 E 979888.1471105255 f 3584177.7586951815 s 20206557.12390885  alpha 1.330063157840269e-09 False
 SD2: i 19 E 483063.6571315998 f 1765795.0918720379 s 10057577.294214495  alpha 2.6316203542276318e-09 False
 SD2: i 20 E 241565.62413887717 f 871500.0005818696 s 4976408.910182304  alpha 5.190746596247317e-09 False
 SD2: i 21 E 125509.8716285046 f 429255.46020158834 s 2349036.607201585  alpha 9.735937628768617e-09 False
 SD2: i 22 E 73739.90074131172 f 230888.26966878193 s 1187161.2279074003  alpha 1.9329635504404015e-08 False
 SD2: i 23 E 47901.02003653183 f 126206.78414798013 s 418312.77563666675  alpha 2.510686951952861e-08 False
 SD2: i 24 E 38109.56080815305 f 101983.64511301302 s 466460.7841790288  alpha 3.636138405666928e-08 False
 SD2: i 25 E 28226.141399499247 f 89771.31747863404 s 209515.36140548578  alpha 5.399610435719869e-08 False
 SD2: i 26 E 21242.84047937062 f 97534.82562078803 s 202127.4003893619  alpha 4.180110447991449e-08 False
 SD2: i 27 E 15487.891174224787 f 107672.51862170624 s 301343.60132654343  alpha 0.01 False
Traceback (most recent call last):
  File "../../../scripts/run-model-test.py", line 129, in <module>
    import test  # import and run the current test
  File "/Users/Cas/gits/testing-framework/scripts/../tests/Si/RSS/test.py", line 4, in <module>
    properties = do_RSS(os.path.join(os.path.abspath(os.path.dirname(__file__)),'random_structs.extxyz'),':10:2')
  File "/Users/Cas/gits/testing-framework/scripts/../share/RSS.py", line 16, in do_RSS
    robust_minim_cell_pos(at, tol, "RSS_%04d" % i_config)
  File "/Users/Cas/gits/testing-framework/scripts/../share/utilities.py", line 312, in robust_minim_cell_pos
    relax_config(atoms, relax_pos=True, relax_cell=True, tol=sd2_tol, max_steps=max_sd2_iter,
  File "/Users/Cas/gits/testing-framework/scripts/../share/utilities.py", line 184, in relax_config
    (traj, run_stat) = sd2_run("", atoms_cell, tol, lambda i : sd2_converged(i, atoms_cell, tol), max_steps)
  File "/Users/Cas/gits/testing-framework/scripts/../share/utilities.py", line 79, in sd2_run
    grad_f = - config_minim.get_forces()
  File "/Users/Cas/miniconda3/lib/python3.8/site-packages/ase-3.20.0b1-py3.8.egg/ase/constraints.py", line 2632, in get_forces
    forces = UnitCellFilter.get_forces(self, **kwargs)
  File "/Users/Cas/miniconda3/lib/python3.8/site-packages/ase-3.20.0b1-py3.8.egg/ase/constraints.py", line 2452, in get_forces
    stress = self.atoms.get_stress(**kwargs)
  File "/Users/Cas/miniconda3/lib/python3.8/site-packages/ase-3.20.0b1-py3.8.egg/ase/atoms.py", line 826, in get_stress
    stress = self._calc.get_stress(self)
  File "/Users/Cas/miniconda3/lib/python3.8/site-packages/ase-3.20.0b1-py3.8.egg/ase/calculators/calculator.py", line 702, in get_stress
    return self.get_property('stress', atoms)
  File "/Users/Cas/miniconda3/lib/python3.8/site-packages/ase-3.20.0b1-py3.8.egg/ase/calculators/calculator.py", line 738, in get_property
    self.calculate(atoms, [name], system_changes)
  File "/Users/Cas/miniconda3/lib/python3.8/site-packages/pyjulip-0.1-py3.8.egg/pyjulip.py", line 74, in calculate
MemoryError: Julia exception: OutOfMemoryError()
Stacktrace:
 [1] Array at ./boot.jl:406 [inlined]
 [2] Array at ./boot.jl:415 [inlined]
 [3] fill at ./array.jl:473 [inlined]
 [4] fill(::Int64, ::Int64) at ./array.jl:471
 [5] _celllist_(::Array{StaticArrays.SArray{Tuple{3},Float64,1,3},1}, ::StaticArrays.SArray{Tuple{3,3},Float64,2,9}, ::StaticArrays.SArray{Tuple{3},Bool,1,3}, ::Float64, ::Type{T} where T) at /Users/Cas/.julia/packages/NeighbourLists/hb4fp/src/cell_list.jl:119
 [6] _pairlist_(::Array{StaticArrays.SArray{Tuple{3},Float64,1,3},1}, ::StaticArrays.SArray{Tuple{3,3},Float64,2,9}, ::StaticArrays.SArray{Tuple{3},Bool,1,3}, ::Float64, ::Type{T} where T, ::Bool) at /Users/Cas/.julia/packages/NeighbourLists/hb4fp/src/cell_list.jl:294
 [7] #PairList#1 at /Users/Cas/.julia/packages/NeighbourLists/hb4fp/src/cell_list.jl:6 [inlined]
 [8] neighbourlist(::Atoms{Float64}, ::Float64; recompute::Bool, key::String, storelist::Bool, int_type::Type{T} where T, kwargs::Base.Iterators.Pairs{Union{},Union{},Tuple{},NamedTuple{(),Tuple{}}}) at /Users/Cas/.julia/packages/JuLIP/MiEQI/src/atoms.jl:198
 [9] neighbourlist at /Users/Cas/.julia/packages/JuLIP/MiEQI/src/atoms.jl:188 [inlined]
 [10] alloc_temp_d(::ACE.PairPotentials.RepulsiveCore{Float64,PolyPairPot{Float64,ACE.OrthPolys.TransformedPolys{Float64,PolyTransform{Int64,Float64},ACE.OrthPolys.OrthPolyBasis{Float64}},1},1}, ::Atoms{Float64}) at /Users/Cas/.julia/packages/JuLIP/MiEQI/src/Potentials.jl:180
 [11] #virial#8 at /Users/Cas/.julia/packages/JuLIP/MiEQI/src/Potentials.jl:197 [inlined]
 [12] virial at /Users/Cas/.julia/packages/JuLIP/MiEQI/src/Potentials.jl:197 [inlined]
 [13] (::JuLIP.MLIPs.var"#30#31"{Base.Iterators.Pairs{Union{},Union{},Tuple{},NamedTuple{(),Tuple{}}},Atoms{Float64}})(::ACE.PairPotentials.RepulsiveCore{Float64,PolyPairPot{Float64,ACE.OrthPolys.TransformedPolys{Float64,PolyTransform{Int64,Float64},ACE.OrthPolys.OrthPolyBasis{Float64}},1},1}) at ./none:0
 [14] MappingRF at ./reduce.jl:93 [inlined]
 [15] _foldl_impl(::Base.MappingRF{JuLIP.MLIPs.var"#30#31"{Base.Iterators.Pairs{Union{},Union{},Tuple{},NamedTuple{(),Tuple{}}},Atoms{Float64}},Base.BottomRF{typeof(Base.add_sum)}}, ::Base._InitialValue, ::Array{AbstractCalculator,1}) at ./reduce.jl:62
 [16] foldl_impl at ./reduce.jl:48 [inlined]
 [17] mapfoldl_impl at ./reduce.jl:44 [inlined]
 [18] #mapfoldl#204 at ./reduce.jl:160 [inlined]
 [19] mapfoldl at ./reduce.jl:160 [inlined]
 [20] #mapreduce#208 at ./reduce.jl:287 [inlined]
 [21] mapreduce at ./reduce.jl:287 [inlined]
 [22] sum at ./reduce.jl:494 [inlined]
 [23] sum at ./reduce.jl:511 [inlined]
 [24] #virial#29 at /Users/Cas/.julia/packages/JuLIP/MiEQI/src/mlips.jl:174 [inlined]
 [25] virial at /Users/Cas/.julia/packages/JuLIP/MiEQI/src/mlips.jl:174 [inlined]
 [26] stress(::JuLIP.MLIPs.SumIP{AbstractCalculator}, ::Atoms{Float64}) at /Users/Cas/.julia/packages/JuLIP/MiEQI/src/abstractions.jl:343
 [27] invokelatest(::Any, ::Any, ::Vararg{Any,N} where N; kwargs::Base.Iterators.Pairs{Union{},Union{},Tuple{},NamedTuple{(),Tuple{}}}) at ./essentials.jl:710
 [28] invokelatest(::Any, ::Any, ::Vararg{Any,N} where N) at ./essentials.jl:709
 [29] _pyjlwrap_call(::Function, ::Ptr{PyCall.PyObject_struct}, ::Ptr{PyCall.PyObject_struct}) at /Users/Cas/.julia/packages/PyCall/zqDXB/src/callback.jl:28
 [30] pyjlwrap_call(::Ptr{PyCall.PyObject_struct}, ::Ptr{PyCall.PyObject_struct}, ::Ptr{PyCall.PyObject_struct}) at /Users/Cas/.julia/packages/PyCall/zqDXB/src/callback.jl:49
